Testing LangGraph Chatbot with SQLite Checkpointing

User: What is the weather in San Francisco?
Assistant: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (current conditions like clear/cloudy/rain, humidity, wind speed/direction), an hourly forecast, or a multi-day forecast? I can refresh the data if you want the latest reading.

User: Can you send me a notification with the current weather in Troy, Michigan?
Assistant: I wasn’t able to send the push notification — the attempt failed with status code 400. I can still provide the weather and try again if you want.

Current weather in Troy, MI: 4°F (about −15.6°C).

Options:
- I can retry sending the push notification now. If so, tell me which device or notification target to use (or confirm you want it sent to your default device).
- I can send the same message as an email or SMS instead (if you provide the address/number).
- I can give you a copyable notification message to paste into whatever app you use.

Troubleshooting tips if you want me to retry:
- Make sure notifications are enabled for this app on your device.
- Confirm the device/account you want the notification sent to is registered with this service.
- Check your device has internet connectivity.
- If you want, provide any device identifier or the account name to target.

Copyable notification text:
"Current weather in Troy, MI: 4°F (about −15.6°C)."

What would you like me to do next?

User: Can you resend me the notification again?
Assistant: Sorry — the push notification failed again (status code 400). That status usually means the request was malformed or the target/device token is invalid. I can’t complete the send until we fix one of those issues.

Options — tell me which you want:
1) Retry now to your default device (I will attempt another send).
2) Retry but specify a device/account or device token (paste the identifier).
3) Send the weather by SMS or email instead — provide the phone number or email address.
4) I’ll give you a copyable notification message you can paste into another app (see below).
5) Troubleshoot first (steps below).

Quick troubleshooting steps you can try:
- Make sure notifications are enabled for this app on your device (Settings -> Notifications).
- If you recently reinstalled or signed out, re-register the device in the app so it gets a fresh token.
- Ensure the device has network connectivity.
- If you have a device identifier or account name for notifications, paste it here.

Copyable notification text:
"Current weather in Troy, MI: 4°F (about −15.6°C)."

Which option do you want me to try?

State History:
================================================================================

State 1:
  Checkpoint ID: 1f0fb674-936e-6d7b-800f-f5c4d96e80af
  Messages: 14
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
    Message 6 [ai]: 
    Message 7 [tool]: 4°F
    Message 8 [ai]: 
    Message 9 [tool]: Failed to send push notification. Status code: 400
    Message 10 [ai]: I wasn’t able to send the push notification — the attempt failed with status code 400. I can still p...
    Message 11 [human]: Can you resend me the notification again?
    Message 12 [ai]: 
    Message 13 [tool]: Failed to send push notification. Status code: 400
    Message 14 [ai]: Sorry — the push notification failed again (status code 400). That status usually means the request ...
--------------------------------------------------------------------------------

State 2:
  Checkpoint ID: 1f0fb674-4787-6986-800e-5b376357587b
  Messages: 13
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
    Message 6 [ai]: 
    Message 7 [tool]: 4°F
    Message 8 [ai]: 
    Message 9 [tool]: Failed to send push notification. Status code: 400
    Message 10 [ai]: I wasn’t able to send the push notification — the attempt failed with status code 400. I can still p...
    Message 11 [human]: Can you resend me the notification again?
    Message 12 [ai]: 
    Message 13 [tool]: Failed to send push notification. Status code: 400
--------------------------------------------------------------------------------

State 3:
  Checkpoint ID: 1f0fb674-33cf-6036-800d-caa7e81d55f8
  Messages: 12
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
    Message 6 [ai]: 
    Message 7 [tool]: 4°F
    Message 8 [ai]: 
    Message 9 [tool]: Failed to send push notification. Status code: 400
    Message 10 [ai]: I wasn’t able to send the push notification — the attempt failed with status code 400. I can still p...
    Message 11 [human]: Can you resend me the notification again?
    Message 12 [ai]: 
--------------------------------------------------------------------------------

State 4:
  Checkpoint ID: 1f0fb674-1595-6188-800c-6904e15ee8b1
  Messages: 11
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
    Message 6 [ai]: 
    Message 7 [tool]: 4°F
    Message 8 [ai]: 
    Message 9 [tool]: Failed to send push notification. Status code: 400
    Message 10 [ai]: I wasn’t able to send the push notification — the attempt failed with status code 400. I can still p...
    Message 11 [human]: Can you resend me the notification again?
--------------------------------------------------------------------------------

State 5:
  Checkpoint ID: 1f0fb674-1592-687d-800b-a9a9a8d62b26
  Messages: 10
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
    Message 6 [ai]: 
    Message 7 [tool]: 4°F
    Message 8 [ai]: 
    Message 9 [tool]: Failed to send push notification. Status code: 400
    Message 10 [ai]: I wasn’t able to send the push notification — the attempt failed with status code 400. I can still p...
--------------------------------------------------------------------------------

State 6:
  Checkpoint ID: 1f0fb674-1583-658d-800a-087aea0086f8
  Messages: 10
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
    Message 6 [ai]: 
    Message 7 [tool]: 4°F
    Message 8 [ai]: 
    Message 9 [tool]: Failed to send push notification. Status code: 400
    Message 10 [ai]: I wasn’t able to send the push notification — the attempt failed with status code 400. I can still p...
--------------------------------------------------------------------------------

State 7:
  Checkpoint ID: 1f0fb673-cff1-6cf4-8009-46850371518e
  Messages: 9
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
    Message 6 [ai]: 
    Message 7 [tool]: 4°F
    Message 8 [ai]: 
    Message 9 [tool]: Failed to send push notification. Status code: 400
--------------------------------------------------------------------------------

State 8:
  Checkpoint ID: 1f0fb673-b808-6c86-8008-46eafbd47d7a
  Messages: 8
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
    Message 6 [ai]: 
    Message 7 [tool]: 4°F
    Message 8 [ai]: 
--------------------------------------------------------------------------------

State 9:
  Checkpoint ID: 1f0fb673-9a4f-6d30-8007-da893c9d98bd
  Messages: 7
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
    Message 6 [ai]: 
    Message 7 [tool]: 4°F
--------------------------------------------------------------------------------

State 10:
  Checkpoint ID: 1f0fb673-80e4-6625-8006-f6533bfef59b
  Messages: 6
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
    Message 6 [ai]: 
--------------------------------------------------------------------------------

State 11:
  Checkpoint ID: 1f0fb673-68db-6071-8005-f17f4993aade
  Messages: 5
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
    Message 5 [human]: Can you send me a notification with the current weather in Troy, Michigan?
--------------------------------------------------------------------------------

State 12:
  Checkpoint ID: 1f0fb673-68d6-6374-8004-64d2ea5ce66e
  Messages: 4
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
--------------------------------------------------------------------------------

State 13:
  Checkpoint ID: 1f0fb673-68c3-68a6-8003-12678ea56b3a
  Messages: 4
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
    Message 4 [ai]: Current reported temperature in San Francisco: 51°F (about 10.6°C).

Would you like more details (cu...
--------------------------------------------------------------------------------

State 14:
  Checkpoint ID: 1f0fb673-2ea4-672a-8002-372e8e62e3f3
  Messages: 3
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
    Message 3 [tool]: 51°F
--------------------------------------------------------------------------------

State 15:
  Checkpoint ID: 1f0fb673-1495-68e0-8001-8cd49e5b621c
  Messages: 2
    Message 1 [human]: What is the weather in San Francisco?
    Message 2 [ai]: 
--------------------------------------------------------------------------------

State 16:
  Checkpoint ID: 1f0fb672-f3e0-660d-8000-ea6af642005d
  Messages: 1
    Message 1 [human]: What is the weather in San Francisco?
--------------------------------------------------------------------------------

State 17:
  Checkpoint ID: 1f0fb672-f3dc-6b5e-bfff-86b2831f891e
  Messages: 0
--------------------------------------------------------------------------------
